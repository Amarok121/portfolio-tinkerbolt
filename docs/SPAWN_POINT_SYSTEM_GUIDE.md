# μ¤ν° ν¬μΈνΈ μ‹μ¤ν… μ‚¬μ© κ°€μ΄λ“

## π“‹ κ°μ”

μ¤ν° ν¬μΈνΈ μ‹μ¤ν…μ€ μ”¬ μ „ν™ μ‹ ν”λ μ΄μ–΄κ°€ λ“±μ¥ν•  μ„μΉλ¥Ό μ •μν•κ³  κ΄€λ¦¬ν•λ” μ‹μ¤ν…μ…λ‹λ‹¤. κΈ°μ΅΄μ μ§μ ‘ μΆν‘ μ…λ ¥ λ°©μ‹ λ€μ‹ , **μ¤ν° ν¬μΈνΈλ¥Ό μ‚¬μ©ν•μ—¬ λ” μ μ—°ν•κ³  κ΄€λ¦¬ν•κΈ° μ‰¬μ΄ λ°©μ‹**μΌλ΅ μ”¬ μ „ν™μ„ μ²λ¦¬ν•  μ μμµλ‹λ‹¤.

---

## π― μ£Όμ” κΈ°λ¥

### β… μ¤ν° ν¬μΈνΈ λ…Έλ“
- `Marker2D` κΈ°λ°μΌλ΅ μ”¬μ—μ„ ν”λ μ΄μ–΄κ°€ λ“±μ¥ν•  μ„μΉλ¥Ό ν‘μ‹
- κ³ μ  IDμ™€ μ΄λ¦„μΌλ΅ κ΄€λ¦¬
- κΈ°λ³Έ μ¤ν° ν¬μΈνΈ μ§€μ • κ°€λ¥
- λ””λ²„κ·Έ μ‹κ°ν™” μ§€μ› (λ””λ²„κ·Έ λΉλ“μ—μ„λ§)

### β… transition_point ν†µν•©
- μ¤ν° ν¬μΈνΈ IDλ¥Ό ν†µν•΄ λ©ν‘ μ”¬μ μ¤ν° ν¬μΈνΈ μ§€μ •
- κΈ°μ΅΄ μ§μ ‘ μΆν‘ λ°©μ‹κ³Ό ν•μ„ νΈν™ μ μ§€
- `use_spawn_point` ν”λκ·Έλ΅ μ „ν™ λ°©μ‹ μ„ νƒ

### β… μλ™ ν΄λ°±
- μ¤ν° ν¬μΈνΈλ¥Ό μ°Ύμ§€ λ»ν•λ©΄ μλ™μΌλ΅ κΈ°μ΅΄ λ°©μ‹(μ§μ ‘ μΆν‘)μΌλ΅ ν΄λ°±
- μ—¬λ¬ ν΄λ°± μµμ… μ κ³µ (μ¤ν° ν¬μΈνΈ β†’ destination β†’ init_point β†’ μ„Έμ΄λΈ μ„μΉ)

---

## π€ μ‚¬μ© λ°©λ²•

### 1λ‹¨κ³„: μ¤ν° ν¬μΈνΈ λ…Έλ“ μƒμ„±

μ”¬μ— μ¤ν° ν¬μΈνΈλ¥Ό μ¶”κ°€ν•λ ¤λ©΄:

1. **μ”¬ νΈλ¦¬μ—μ„ μ›ν•λ” μ„μΉμ— `Marker2D` λ…Έλ“ μ¶”κ°€**
2. **λ…Έλ“ μ¤ν¬λ¦½νΈλ¥Ό `SpawnPoint.gd`λ΅ μ„¤μ •**
   - λλ” λ…Έλ“μ— `SpawnPoint` μ¤ν¬λ¦½νΈλ¥Ό μ—°κ²°

**κ²½λ΅:** `Assets/PreFabs/Scenes/Systems/SpawnPoint.gd`

### 2λ‹¨κ³„: μ¤ν° ν¬μΈνΈ μ„¤μ •

Inspectorμ—μ„ μ¤ν° ν¬μΈνΈ μ†μ„±μ„ μ„¤μ •ν•©λ‹λ‹¤:

```
spawn_point_id: "entrance_from_room_1"    # κ³ μ  ID (μ¤‘μ”!)
spawn_point_name: "Room 1 Entrance"       # ν‘μ‹ μ΄λ¦„
is_default: false                         # κΈ°λ³Έ μ¤ν° ν¬μΈνΈ μ—¬λ¶€
direction: 0.0                            # ν”λ μ΄μ–΄κ°€ λ°”λΌλ³Ό λ°©ν–¥ (λΌλ””μ•)
```

**κ¶μ¥ μ‚¬ν•­:**
- `spawn_point_id`λ” **λ°λ“μ‹ κ³ μ ν•κ²** μ§€μ •ν•μ„Έμ”
- λΉ„μ–΄μμΌλ©΄ μλ™ μƒμ„±λμ§€λ§, μλ™ μ§€μ •μ„ κ¶μ¥ν•©λ‹λ‹¤
- `is_default: true`λ΅ μ„¤μ •ν•λ©΄ IDλ¥Ό λ¨λ¥Ό λ• μλ™μΌλ΅ μ„ νƒλ©λ‹λ‹¤

### 3λ‹¨κ³„: transition_pointμ— μ¤ν° ν¬μΈνΈ μ—°κ²°

μ”¬ μ „ν™ ν¬μΈνΈμ—μ„ μ¤ν° ν¬μΈνΈλ¥Ό μ‚¬μ©ν•λ„λ΅ μ„¤μ •:

1. **transition_point λ…Έλ“ μ„ νƒ**
2. **Inspectorμ—μ„ λ‹¤μ μ†μ„± μ„¤μ •:**

```
use_spawn_point: true                           # β… μ¤ν° ν¬μΈνΈ μ‚¬μ© ν™μ„±ν™”
target_spawn_point_id: "entrance_from_room_1"   # λ©ν‘ μ”¬μ μ¤ν° ν¬μΈνΈ ID
target_destination: (0, 0)                      # ν΄λ°±μ© μΆν‘ (μ‚¬μ© μ• ν•¨)
```

**κΈ°μ΅΄ λ°©μ‹ μ μ§€:**
```
use_spawn_point: false                          # μ§μ ‘ μΆν‘ μ‚¬μ©
target_spawn_point_id: ""                       # λΉ„μ›λ‘ 
target_destination: (288, 452)                  # μ§μ ‘ μΆν‘ μ…λ ¥
```

---

## π“ μμ‹ μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: κΈ°λ³Έ μ”¬ μ „ν™

**μƒν™©:** `dawn_room`μ—μ„ `dawn_platform`λ΅ μ΄λ™

1. **`dawn_platform.tscn`μ— μ¤ν° ν¬μΈνΈ μ¶”κ°€:**
   - λ…Έλ“ μ΄λ¦„: `SpawnPoint_FromRoom`
   - `spawn_point_id`: `"from_dawn_room"`
   - `spawn_point_name`: `"From Dawn Room"`
   - μ„μΉ: `(288, 452)`

2. **`dawn_room.tscn`μ transition_point μ„¤μ •:**
   - `use_spawn_point`: `true`
   - `target_spawn_point_id`: `"from_dawn_room"`
   - `level`: `"res://Assets/PreFabs/Scenes/Levels/Tutorial/dawn_platform.tscn"`

### μ‹λ‚λ¦¬μ¤ 2: μ—¬λ¬ μ…κµ¬κ°€ μλ” μ”¬

**μƒν™©:** `main_hub`μ— μ—¬λ¬ μ…κµ¬κ°€ μμ

1. **κ° μ…κµ¬λ§λ‹¤ μ¤ν° ν¬μΈνΈ μƒμ„±:**
   - `SpawnPoint_FromShop` β†’ `spawn_point_id: "from_shop"`
   - `SpawnPoint_FromDungeon` β†’ `spawn_point_id: "from_dungeon"`
   - `SpawnPoint_FromBoss` β†’ `spawn_point_id: "from_boss"`

2. **κ° μ¶λ°μ§€μ transition_pointμ—μ„ μ μ ν• ID μ§€μ •:**
   - μƒμ  β†’ `target_spawn_point_id: "from_shop"`
   - λμ „ β†’ `target_spawn_point_id: "from_dungeon"`
   - λ³΄μ¤λ£Έ β†’ `target_spawn_point_id: "from_boss"`

---

## π”§ κΈ°μ μ  μ„Έλ¶€μ‚¬ν•­

### μ¤ν° μ°μ„ μμ„

ν”λ μ΄μ–΄ μ„μΉ μ„¤μ • μ‹ λ‹¤μ μ°μ„ μμ„λ΅ μ μ©λ©λ‹λ‹¤:

1. **μ¤ν° ν¬μΈνΈ** (κ°€μ¥ λ†’μ)
   - `Global.use_spawn_point == true`μ΄κ³ 
   - `Global.target_spawn_point_id`κ°€ λΉ„μ–΄μμ§€ μ•μ„ λ•
   
2. **μ§μ ‘ μΆν‘** (`Global.destination`)
   - μ¤ν° ν¬μΈνΈκ°€ μ—†κ±°λ‚ μ‹¤ν¨ μ‹
   
3. **μ΄κΈ° μ„μΉ** (`player_init_point`)
   - κ²μ„ μ²« λ΅λ“ μ‹
   
4. **μ„Έμ΄λΈ μ„μΉ** (κ°€μ¥ λ‚®μ)
   - μ„Έμ΄λΈ νμΌμ—μ„ μ €μ¥λ μ„μΉ

### μ½”λ“ νλ¦„

```
transition_point.change_scenes()
  β†“
Global.target_spawn_point_id μ„¤μ •
Global.use_spawn_point = true
  β†“
μ”¬ μ „ν™
  β†“
World.player_inst() λλ” load_player()
  β†“
_find_spawn_point() β†’ SpawnPoint.find_spawn_point()
  β†“
spawn_point.activate(player)
  β†“
ν”λ μ΄μ–΄ μ„μΉ μ„¤μ • μ™„λ£
```

---

## π› λ¬Έμ  ν•΄κ²°

### μ¤ν° ν¬μΈνΈλ¥Ό μ°Ύμ„ μ μ—†μ

**μ¦μƒ:** `push_warning("Spawn point not found: ...")`

**ν•΄κ²° λ°©λ²•:**
1. μ¤ν° ν¬μΈνΈ IDκ°€ μ •ν™•ν•μ§€ ν™•μΈ
2. μ¤ν° ν¬μΈνΈ λ…Έλ“κ°€ μ”¬μ— μ΅΄μ¬ν•λ”μ§€ ν™•μΈ
3. μ¤ν° ν¬μΈνΈ μ¤ν¬λ¦½νΈκ°€ μ¬λ°”λ¥΄κ² μ—°κ²°λμ—λ”μ§€ ν™•μΈ
4. `is_default: true`λ΅ μ„¤μ •ν•μ—¬ ν΄λ°± λ™μ‘ ν™•μΈ

### ν”λ μ΄μ–΄κ°€ μλ»λ μ„μΉμ— μ¤ν°λ¨

**ν™•μΈ μ‚¬ν•­:**
1. μ¤ν° ν¬μΈνΈμ `global_position` ν™•μΈ
2. μ¤ν° ν¬μΈνΈκ°€ μ›”λ“μ μ¬λ°”λ¥Έ μ„μΉμ— μλ”μ§€ ν™•μΈ
3. μ¶©λ μμ—­κ³Ό κ²ΉμΉμ§€ μ•λ”μ§€ ν™•μΈ

### κΈ°μ΅΄ μΆν‘ λ°©μ‹μΌλ΅ λλλ¦¬κ³  μ‹¶μ

**κ°„λ‹¨ν• ν•΄κ²°:**
```
use_spawn_point: false  # μ΄ ν• μ¤„λ§ λ³€κ²½
```

---

## π“ κ΄€λ ¨ νμΌ

- **`Assets/PreFabs/Scenes/Systems/SpawnPoint.gd`**
  - μ¤ν° ν¬μΈνΈ λ…Έλ“ μ¤ν¬λ¦½νΈ
  
- **`Assets/PreFabs/Scenes/Levels/Tutorial/transition_point.gd`**
  - μ”¬ μ „ν™ ν¬μΈνΈ μ¤ν¬λ¦½νΈ (μ¤ν° ν¬μΈνΈ ν†µν•©)
  
- **`Assets/PreFabs/Scenes/World.gd`**
  - μ›”λ“ ν΄λμ¤ (μ¤ν° ν¬μΈνΈ μ°ΎκΈ° λ° μ μ©)
  
- **`Autoload/Global.gd`**
  - μ „μ—­ λ³€μ (`target_spawn_point_id`, `use_spawn_point`)

---

## π’΅ ν

1. **μ¤ν° ν¬μΈνΈ ID λ„¤μ΄λ° κ·μΉ™:**
   - `"from_[μ›λ³Έμ”¬μ΄λ¦„]"` ν•μ‹ κ¶μ¥
   - μ: `"from_dawn_room"`, `"from_shop"`, `"from_boss_room"`

2. **λ””λ²„κ·Έ μ‹κ°ν™”:**
   - λ””λ²„κ·Έ λΉλ“μ—μ„ μ¤ν° ν¬μΈνΈκ°€ μ‹κ°μ μΌλ΅ ν‘μ‹λ¨
   - λ…Ήμƒ‰ μ›κ³Ό ν™”μ‚΄ν‘λ΅ μ„μΉμ™€ λ°©ν–¥ ν™•μΈ κ°€λ¥

3. **κΈ°λ³Έ μ¤ν° ν¬μΈνΈ:**
   - μ”¬λ‹Ή ν•λ‚μ κΈ°λ³Έ μ¤ν° ν¬μΈνΈλ¥Ό μ„¤μ •ν•μ„Έμ”
   - IDλ¥Ό λ¨λ¥΄κ±°λ‚ μ„¤μ •ν•μ§€ μ•μ€ κ²½μ° μλ™μΌλ΅ μ‚¬μ©λ©λ‹λ‹¤

4. **λ°©ν–¥ μ„¤μ •:**
   - `direction` μ†μ„±μΌλ΅ ν”λ μ΄μ–΄κ°€ μ¤ν° μ‹ λ°”λΌλ³Ό λ°©ν–¥ μ„¤μ • κ°€λ¥
   - λΌλ””μ• λ‹¨μ„ (μ: `0.0` = μ¤λ¥Έμ½, `PI / 2` = μ•„λμ½)

---

## β… μ²΄ν¬λ¦¬μ¤νΈ

μ¤ν° ν¬μΈνΈ μ‹μ¤ν…μ„ μ‚¬μ©ν•κΈ° μ „μ—:

- [ ] μ¤ν° ν¬μΈνΈ λ…Έλ“κ°€ μ”¬μ— μ¶”κ°€λμ—λ”κ°€?
- [ ] `spawn_point_id`κ°€ κ³ μ ν•κ² μ„¤μ •λμ—λ”κ°€?
- [ ] `transition_point`μ—μ„ `use_spawn_point: true`λ΅ μ„¤μ •ν–λ”κ°€?
- [ ] `target_spawn_point_id`κ°€ μ¬λ°”λ¥Έ IDλ¥Ό κ°€λ¦¬ν‚¤λ”κ°€?
- [ ] ν…μ¤νΈλ¥Ό ν†µν•΄ ν”λ μ΄μ–΄κ°€ μ¬λ°”λ¥Έ μ„μΉμ— μ¤ν°λλ”κ°€?

---

**μ¤ν° ν¬μΈνΈ μ‹μ¤ν…μ΄ μ„±κ³µμ μΌλ΅ κµ¬ν„λμ—μµλ‹λ‹¤!** π‰

μ΄μ  μ”¬ μ „ν™ μ‹ μΆν‘λ¥Ό μ§μ ‘ μ…λ ¥ν•λ” λ€μ‹ , μ¤ν° ν¬μΈνΈ IDλ§ μ§€μ •ν•λ©΄ λ©λ‹λ‹¤.
